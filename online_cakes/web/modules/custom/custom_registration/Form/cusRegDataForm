<?php
namespace Drupal\custom_registration\Form;
use Drupal\Core\Form\FormBase;
use Drupal\Core\Form\FormStateInterface;
use Drupal\Core\Form\ConfigFormBase;
use Drupal\Core\Database\Database;
use Symfony\Component\HttpFoundation\RedirectResponse;

class cusRegDataForm extends FormBase {

    public function getFormId() {
        return 'cusReg_form';
    }

    public function buildForm(array $form, FormStateInterface $form_state) {
        $form['cus_name'] = array(
            '#type' => 'textfield',
            '#title' => $this->t('Customer Name:'),
            '#required' => TRUE,
            );

        $form['submit'] = [
            '#type' => 'submit',
            '#value' => 'save',
        ];
        return $form;
    }

    public function validateForm(array &$form, FormStateInterface $form_state) {
        $name = $form_state->getValue('cus_name');
        if(preg_match('/[^A-Za-z]/', $name)) {
            $form_state->setErrorByName('cus_name', $this->t('your name must in characters without space'));
        }
    }

    public function submitForm(array &$form, FormStateInterface $form_state) {
        $field=$form_state->getValues();
        $name=$field['cus_name'];

        if (isset($_GET['num'])) {
            $field  = array(
                'name'   => $name,
            );
            $query = \Drupal::database();
            $query->update('custom_registration')
                ->fields($field)
                ->condition('id', $_GET['num'])
                ->execute();
            // drupal_set_message("succesfully updated");
            $form_state->setRedirect('custom_registration.display_table_controller_display');
        }
        else {
           $field  = array(
              'name'   =>  $name,
          );
           $query = \Drupal::database();
           $query ->insert('custom_registration')
               ->fields($field)
               ->execute();
        //    drupal_set_message("succesfully saved");
           $form_state->setRedirect('custom_registration.display_table_controller_display');
       }
    }
}

